{"version":3,"file":"chunk/components/GetLuckyBox.bundle.js?v=168c132321b8ccc19cd9","mappings":"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","sources":["webpack:///./components/GetLuckyBox/main.vue","webpack:///components/GetLuckyBox/main.vue","webpack:///./components/GetLuckyBox/main.vue?bfc7","webpack:///./components/GetLuckyBox/main.vue?dcfa"],"sourcesContent":["var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    {\n      ref: \"box\",\n      staticClass: \"modal\",\n      attrs: {\n        id: \"GetLuckyBox\",\n        tabindex: \"-1\",\n        role: \"dialog\",\n        \"data-backdrop\": \"static\",\n        \"data-keyboard\": \"false\",\n      },\n    },\n    [\n      _c(\"div\", { staticClass: \"modal-dialog\", attrs: { role: \"document\" } }, [\n        _c(\"div\", { staticClass: \"modal-content\" }, [\n          _vm._m(0),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"modal-body\" }, [\n            _vm.needSetWebTitle\n              ? _c(\n                  \"div\",\n                  {\n                    staticClass: \"alert alert-primary\",\n                    staticStyle: { flex: \"0 0 auto\" },\n                    attrs: { role: \"alert\" },\n                  },\n                  [\n                    _vm._v(\n                      \"\\n                    請先設定屬於您的抽獎活動名稱\\n                    \"\n                    ),\n                    _c(\n                      \"button\",\n                      {\n                        staticClass: \"btn btn-success btn-sm\",\n                        on: { click: _vm.gotoSetWebTitle },\n                      },\n                      [_vm._v(\"立刻去\")]\n                    ),\n                  ]\n                )\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              {\n                staticClass: \"get-lucky-list\",\n                class: { disabled: _vm.needSetWebTitle },\n              },\n              [\n                _vm.prizeListByAward.length > 0\n                  ? _vm._l(_vm.prizeListByAward, function (prizeInfo) {\n                      return _c(\n                        \"button\",\n                        {\n                          key: prizeInfo.prize_sn,\n                          staticClass:\n                            \"btn btn-success btn-lg btn-block mb-3 prizeInfo\",\n                          attrs: {\n                            type: \"button\",\n                            disabled: prizeInfo.amount <= prizeInfo.count,\n                          },\n                          on: {\n                            click: function ($event) {\n                              return _vm.getLucky(prizeInfo)\n                            },\n                          },\n                        },\n                        [\n                          _c(\"div\", { staticClass: \"row\" }, [\n                            _c(\"div\", { staticClass: \"col-9\" }, [\n                              _vm._v(\n                                \"\\n                                    \" +\n                                  _vm._s(prizeInfo.title) +\n                                  \"\\n                                \"\n                              ),\n                            ]),\n                            _vm._v(\" \"),\n                            _c(\"div\", { staticClass: \"col-3\" }, [\n                              _vm._v(\n                                \"\\n                                    [\" +\n                                  _vm._s(prizeInfo.count) +\n                                  \" / \" +\n                                  _vm._s(prizeInfo.amount) +\n                                  \"]\\n                                \"\n                              ),\n                            ]),\n                          ]),\n                        ]\n                      )\n                    })\n                  : [\n                      _c(\"h4\", { staticClass: \"text-center p-3\" }, [\n                        _vm._v(\n                          \"\\n                            您尚未建立獎項，無法進行抽獎\\n                        \"\n                        ),\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"button\",\n                        {\n                          staticClass: \"btn btn-warning btn-block btn-lg\",\n                          on: { click: _vm.editPrizeList },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n                            建立獎項\\n                        \"\n                          ),\n                        ]\n                      ),\n                    ],\n              ],\n              2\n            ),\n          ]),\n        ]),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = [\n  function () {\n    var _vm = this,\n      _c = _vm._self._c\n    return _c(\"div\", { staticClass: \"modal-header\" }, [\n      _c(\"h5\", { staticClass: \"modal-title\" }, [\n        _c(\"i\", { staticClass: \"fas fa-vote-yea\" }),\n        _vm._v(\"\\n                    選取獎項\\n                \"),\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        {\n          staticClass: \"close\",\n          attrs: {\n            type: \"button\",\n            \"data-dismiss\": \"modal\",\n            \"aria-label\": \"Close\",\n          },\n        },\n        [_c(\"span\", { attrs: { \"aria-hidden\": \"true\" } }, [_vm._v(\"×\")])]\n      ),\n    ])\n  },\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"GetLuckyBox\" ref=\"box\" class=\"modal\" tabindex=\"-1\"\n        role=\"dialog\"\n        data-backdrop=\"static\" data-keyboard=\"false\"\n    >\n        <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">\n                        <i class=\"fas fa-vote-yea\"></i>\n                        選取獎項\n                    </h5>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\"\n                        aria-label=\"Close\"\n                    >\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                    <div v-if=\"needSetWebTitle\" role=\"alert\" class=\"alert alert-primary\" style=\"flex: 0 0 auto;\">\n                        請先設定屬於您的抽獎活動名稱\n                        <button class=\"btn btn-success btn-sm\" @click=\"gotoSetWebTitle\">立刻去</button>\n                    </div>\n                    <div class=\"get-lucky-list\" :class=\"{ disabled: needSetWebTitle }\">\n                        <template v-if=\"prizeListByAward.length > 0\">\n                            <button v-for=\"prizeInfo in prizeListByAward\"\n                                :key=\"prizeInfo.prize_sn\"\n                                type=\"button\"\n                                class=\"btn btn-success btn-lg btn-block mb-3 prizeInfo\"\n                                :disabled=\"prizeInfo.amount <= prizeInfo.count\"\n                                @click=\"getLucky(prizeInfo)\"\n                            >\n                                <div class=\"row\">\n                                    <div class=\"col-9\">\n                                        {{ prizeInfo.title }}\n                                    </div>\n                                    <div class=\"col-3\">\n                                        [{{ prizeInfo.count }} / {{ prizeInfo.amount }}]\n                                    </div>\n                                </div>\n                            </button>\n                        </template>\n                        <template v-else>\n                            <h4 class=\"text-center p-3\">\n                                您尚未建立獎項，無法進行抽獎\n                            </h4>\n                            <button class=\"btn btn-warning btn-block btn-lg\"\n                                @click=\"editPrizeList\"\n                            >\n                                建立獎項\n                            </button>\n                        </template>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport { mapActions, mapMutations, mapGetters } from 'vuex';\nimport { Tutorial, popup, trackJS } from 'lib/common/util';\n\nconst audio = {\n    ding: new Audio('./dist/mp3/ding.mp3'),\n    winner: [\n        // new Audio(\"./dist/mp3/winner1.mp3\"),\n        new Audio('./dist/mp3/winner2.mp3'),\n    ],\n};\n\n// import $ from 'jquery';\n// import 'bootstrap';\n\n// import 'app';\n// import { string, jsVars, popup, trackJS, localStorage, ppPanel } from 'lib/common/util';\n\nexport default {\n    components: {},\n    filters: {},\n    props: {},\n    data(){\n        return {\n            ValidateCandidateSN: null,\n            ValidSNRandomRange: 0,\n\n            defaultRunTime: 50,\n            runTime: 0,\n            orgRunTime: 0,\n        };\n    },\n    computed: {\n        ...mapGetters([\n            'config',\n            'triggerOpenGetLucky',\n            'prizeListByAward',\n            'candidateList',\n            'haveAwardCandidateSN',\n            'getLuckyWaitTimeArr',\n        ]),\n        needSetWebTitle(){\n            const that = this;\n            let needSetWebTitle = false;\n            if (!that.config.isTutorial && (!that.config.webTitle || ['Lucky Draw', 'LuckyDraw', 'luckydraw'].includes(that.config.webTitle))) {\n                needSetWebTitle = true;\n            }\n            return needSetWebTitle;\n        },\n    },\n    watch: {\n        triggerOpenGetLucky: {\n            immediate: true,\n            handler(){\n                const that = this;\n                if (that.triggerOpenGetLucky) {\n                    $(that.$refs.box).modal('show');\n                } else {\n                    $(that.$refs.box).modal('hide');\n                }\n            },\n        },\n    },\n    created(){},\n    mounted(){\n        const that = this;\n        $(that.$refs.box).bind('shown.bs.modal', () => {\n            that.award = '';\n            trackJS.mixpanel('GetLuckyOpen_click');\n            trackJS.gtag('event', 'GetLuckyOpen_click');\n        });\n        $(that.$refs.box).bind('hidden.bs.modal', () => {\n            trackJS.mixpanel('GetLuckyClose_click');\n            trackJS.gtag('event', 'GetLuckyClose_click');\n        });\n\n        if (that.triggerOpenGetLucky) {\n            $(that.$refs.box).modal('show');\n        } else {\n            $(that.$refs.box).modal('hide');\n        }\n    },\n    updated(){},\n    destroyed(){},\n    methods: {\n        ...mapMutations({\n            setFavicon: 'setFavicon',\n            setFocusCandidateSN: 'setFocusCandidateSN',\n            setFocusPrizeSN: 'setFocusPrizeSN',\n            triggerModal: 'triggerModal',\n        }),\n        gotoSetWebTitle(){\n            const that = this;\n            // that.triggerModal({ key: 'GetLucky', close: true });\n            // setTimeout(() => {\n            //     that.triggerModal({ key: 'Setting' });\n            // }, 100);\n\n            that.triggerModal({ key: 'GetLucky', close: true });\n            const config = {\n                offset: {\n                    top: 60,\n                    bottom: 60,\n                },\n                startCallback(){\n                    trackJS.mixpanel('TutorialStart_trigger', { type: 'WebsiteTitle' });\n                    trackJS.gtag('event', 'TutorialStart_trigger', { type: 'WebsiteTitle' });\n                },\n                closeCallback(){\n                    trackJS.mixpanel('TutorialEnd_trigger', { type: 'WebsiteTitle' });\n                    trackJS.gtag('event', 'TutorialEnd_trigger', { type: 'WebsiteTitle' });\n                },\n                step_callback(node, IntroInfo){\n                    trackJS.mixpanel('TutorialStep_trigger', { type: 'WebsiteTitle', index: IntroInfo.index });\n                    trackJS.gtag('event', 'TutorialStep_trigger', { type: 'WebsiteTitle', index: IntroInfo.index });\n                },\n            };\n\n            const step = [\n                {\n                    target: '#SettingBox input[name=\"webTitle\"]',\n                    title: '獨特的抽獎',\n                    intro: '在抽獎前，設定一個屬於您的獨特抽獎活動名稱。',\n                    beforeAction(Element, TutorialNode, $next){\n                        that.triggerModal({ key: 'Setting' });\n                        setTimeout(() => {\n                            $next();\n                        }, 500);\n                    },\n                },\n            ];\n            const tutorial1 = new Tutorial(step, config);\n            tutorial1.run();\n        },\n        editPrizeList(){\n            const that = this;\n            $(this.$refs.box).modal('hide');\n            that.triggerModal({ key: 'PrizeList' });\n        },\n        getLucky(prizeInfo){\n            const that = this;\n            trackJS.mixpanel('GetLuckyChoosePrize_click', prizeInfo);\n            trackJS.gtag('event', 'GetLuckyChoosePrize_click', prizeInfo);\n            if (prizeInfo.count <= prizeInfo.amount) {\n                const { haveAwardCandidateSN } = that;\n                const ValidateCandidateSN = [];\n\n                that.candidateList.forEach((candidateInfo) => {\n                    if (candidateInfo.del === false && !haveAwardCandidateSN.includes(candidateInfo.sn)) {\n                        ValidateCandidateSN.push(candidateInfo.sn);\n                    }\n                });\n\n                if (ValidateCandidateSN.length > 0) {\n                    that.ValidateCandidateSN = ValidateCandidateSN;\n                    that.ValidSNRandomRange = Math.pow(10, (`${that.ValidateCandidateSN.length}`).length);\n\n                    $(that.$refs.box).modal('hide');\n\n                    that.runTime = that.config.defaultRunTime;\n                    that.orgRunTime = that.config.defaultRunTime;\n                    trackJS.mixpanel('GetLuckyChoosePrizeRun_trigger', prizeInfo);\n                    trackJS.gtag('event', 'GetLuckyChoosePrizeRun_trigger', prizeInfo);\n                    that.setFocusCandidateSN(null);\n                    that.setFocusPrizeSN(prizeInfo.prize_sn);\n                    that.luckyAction();\n                } else {\n                    trackJS.mixpanel('GetLuckyChoosePrizeError_trigger', { error: 'no candidate' });\n                    trackJS.gtag('event', 'GetLuckyChoosePrizeError_trigger', { error: 'no candidate' });\n                    popup.warning({\n                        html: '無候選人可以抽',\n                    });\n                }\n            } else {\n                trackJS.mixpanel('GetLuckyChoosePrizeError_trigger', { error: 'not enough' });\n                trackJS.gtag('event', 'GetLuckyChoosePrizeError_trigger', { error: 'not enough' });\n                popup.warning({\n                    html: '此獎項沒有足夠的數量',\n                });\n            }\n        },\n        luckyAction(){\n            const that = this;\n            const sn_index = parseInt((Math.random() * 100000) % that.ValidateCandidateSN.length);\n            that.setFocusCandidateSN(that.ValidateCandidateSN[sn_index]);\n            audio.ding.play();\n            that.setFavicon('run');\n            const { getLuckyWaitTimeArr } = that;\n            if (that.runTime > 0 && that.ValidateCandidateSN.length > 1) {\n                let waitTime = 0;\n                if (that.orgRunTime < 10) {\n                    waitTime = 100;\n                } else {\n                    for (const index in getLuckyWaitTimeArr) {\n                        if (that.runTime >= getLuckyWaitTimeArr[index].limit) {\n                            waitTime = getLuckyWaitTimeArr[index].wait;\n                            break;\n                        }\n                    }\n                }\n                console.log('waitTime', waitTime);\n                that.runTime -= 1;\n                clearTimeout(that.luckyActionTimer);\n                that.luckyActionTimer = setTimeout(() => {\n                    audio.ding.pause();\n                    audio.ding.currentTime = 0;\n                    that.luckyAction();\n                }, waitTime);\n            } else {\n                setTimeout(() => {\n                    trackJS.mixpanel('GetLuckyChoosePrizeStop_trigger');\n                    trackJS.gtag('event', 'GetLuckyChoosePrizeStop_trigger');\n                    that.triggerModal({ key: 'Lucky' });\n                    const index = parseInt((Math.random() * 10) % audio.winner.length);\n                    audio.winner[index].play();\n                }, 600);\n            }\n        },\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n</style>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=920aa962&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"920aa962\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","id","tabindex","role","_m","_v","needSetWebTitle","staticStyle","flex","on","click","gotoSetWebTitle","_e","class","disabled","prizeListByAward","length","_l","prizeInfo","key","prize_sn","type","amount","count","$event","getLucky","_s","title","editPrizeList","_withStripped","audio","ding","Audio","winner","components","filters","props","data","ValidateCandidateSN","ValidSNRandomRange","defaultRunTime","runTime","orgRunTime","computed","mapGetters","that","config","isTutorial","webTitle","includes","watch","triggerOpenGetLucky","immediate","handler","$","$refs","box","modal","created","mounted","bind","award","trackJS","mixpanel","gtag","updated","destroyed","methods","mapMutations","setFavicon","setFocusCandidateSN","setFocusPrizeSN","triggerModal","close","offset","top","bottom","startCallback","closeCallback","step_callback","node","IntroInfo","index","step","target","intro","beforeAction","Element","TutorialNode","$next","setTimeout","Tutorial","run","haveAwardCandidateSN","candidateList","forEach","candidateInfo","del","sn","push","Math","pow","luckyAction","error","popup","warning","html","sn_index","parseInt","random","play","getLuckyWaitTimeArr","waitTime","limit","wait","console","log","clearTimeout","luckyActionTimer","pause","currentTime"],"sourceRoot":""}