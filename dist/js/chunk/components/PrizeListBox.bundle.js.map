{"version":3,"file":"chunk/components/PrizeListBox.bundle.js?v=e1509f98067ed0384a2d","mappings":"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","sources":["webpack:///./components/PrizeListBox/main.vue","webpack:///components/PrizeListBox/main.vue","webpack:///./components/PrizeListBox/main.vue?e21c","webpack:///./components/PrizeListBox/main.vue?36cf"],"sourcesContent":["var render = function render() {\n  var _vm = this,\n    _c = _vm._self._c\n  return _c(\n    \"div\",\n    {\n      ref: \"box\",\n      staticClass: \"modal\",\n      attrs: { id: \"PrizeListBox\", tabindex: \"-1\", role: \"dialog\" },\n    },\n    [\n      _c(\"div\", { staticClass: \"modal-dialog\", attrs: { role: \"document\" } }, [\n        _c(\"div\", { staticClass: \"modal-content\" }, [\n          _c(\"div\", { staticClass: \"modal-header\" }, [\n            _c(\"h5\", { staticClass: \"modal-title\" }, [\n              _c(\"i\", { staticClass: \"fas fa-award\" }),\n              _vm._v(\n                \"\\n                    獎項名單 [\" +\n                  _vm._s(_vm.inputPrizeListCnt.cnt) +\n                  \" / \" +\n                  _vm._s(_vm.inputPrizeListCnt.amount) +\n                  \"]\\n                \"\n              ),\n            ]),\n            _vm._v(\" \"),\n            _vm._m(0),\n          ]),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"modal-body\" },\n            [\n              _c(\n                \"draggable\",\n                {\n                  attrs: { handle: \".handler\" },\n                  on: { change: _vm.sortCallback },\n                  model: {\n                    value: _vm.inputPrizeList,\n                    callback: function ($$v) {\n                      _vm.inputPrizeList = $$v\n                    },\n                    expression: \"inputPrizeList\",\n                  },\n                },\n                [\n                  _c(\n                    \"transition-group\",\n                    [\n                      _vm._l(_vm.inputPrizeList, function (prizeInfo) {\n                        return [\n                          prizeInfo.del === false\n                            ? [\n                                !!_vm.editPrizeInfo &&\n                                _vm.editPrizeInfo.prize_sn ===\n                                  prizeInfo.prize_sn\n                                  ? _c(\n                                      \"div\",\n                                      {\n                                        key: prizeInfo.prize_sn,\n                                        staticClass: \"input-group mb-3\",\n                                      },\n                                      [\n                                        _c(\n                                          \"div\",\n                                          {\n                                            staticClass:\n                                              \"input-group-prepend handler cursor-pointer\",\n                                          },\n                                          [\n                                            _c(\n                                              \"span\",\n                                              {\n                                                staticClass: \"input-group-text\",\n                                                attrs: { id: \"basic-addon1\" },\n                                              },\n                                              [\n                                                _c(\"i\", {\n                                                  staticClass: \"fas fa-bars\",\n                                                }),\n                                              ]\n                                            ),\n                                          ]\n                                        ),\n                                        _vm._v(\" \"),\n                                        _c(\"input\", {\n                                          directives: [\n                                            {\n                                              name: \"model\",\n                                              rawName: \"v-model\",\n                                              value: _vm.editPrizeInfo.title,\n                                              expression: \"editPrizeInfo.title\",\n                                            },\n                                          ],\n                                          staticClass: \"form-control\",\n                                          attrs: {\n                                            type: \"text\",\n                                            placeholder: \"編輯獎項名稱\",\n                                          },\n                                          domProps: {\n                                            value: _vm.editPrizeInfo.title,\n                                          },\n                                          on: {\n                                            input: function ($event) {\n                                              if ($event.target.composing)\n                                                return\n                                              _vm.$set(\n                                                _vm.editPrizeInfo,\n                                                \"title\",\n                                                $event.target.value\n                                              )\n                                            },\n                                          },\n                                        }),\n                                        _vm._v(\" \"),\n                                        _c(\"input\", {\n                                          directives: [\n                                            {\n                                              name: \"model\",\n                                              rawName: \"v-model.number\",\n                                              value: _vm.editPrizeInfo.amount,\n                                              expression:\n                                                \"editPrizeInfo.amount\",\n                                              modifiers: { number: true },\n                                            },\n                                          ],\n                                          staticClass: \"form-control\",\n                                          attrs: {\n                                            type: \"number\",\n                                            placeholder: \"數量\",\n                                            min: \"1\",\n                                            step: \"1\",\n                                          },\n                                          domProps: {\n                                            value: _vm.editPrizeInfo.amount,\n                                          },\n                                          on: {\n                                            input: function ($event) {\n                                              if ($event.target.composing)\n                                                return\n                                              _vm.$set(\n                                                _vm.editPrizeInfo,\n                                                \"amount\",\n                                                _vm._n($event.target.value)\n                                              )\n                                            },\n                                            blur: function ($event) {\n                                              return _vm.$forceUpdate()\n                                            },\n                                          },\n                                        }),\n                                        _vm._v(\" \"),\n                                        _c(\n                                          \"div\",\n                                          { staticClass: \"input-group-append\" },\n                                          [\n                                            _c(\n                                              \"span\",\n                                              {\n                                                staticClass:\n                                                  \"input-group-text btn-success\",\n                                                staticStyle: {\n                                                  cursor: \"pointer\",\n                                                },\n                                                on: {\n                                                  click: _vm.saveEditPrizeAct,\n                                                },\n                                              },\n                                              [\n                                                _c(\"i\", {\n                                                  staticClass: \"far fa-save\",\n                                                }),\n                                              ]\n                                            ),\n                                          ]\n                                        ),\n                                      ]\n                                    )\n                                  : _c(\n                                      \"div\",\n                                      {\n                                        key: prizeInfo.prize_sn,\n                                        staticClass:\n                                          \"input-group mb-3 prizeListGroup\",\n                                      },\n                                      [\n                                        _c(\n                                          \"div\",\n                                          {\n                                            staticClass:\n                                              \"input-group-prepend handler cursor-pointer\",\n                                          },\n                                          [\n                                            _c(\n                                              \"span\",\n                                              {\n                                                staticClass: \"input-group-text\",\n                                                attrs: { id: \"basic-addon1\" },\n                                              },\n                                              [\n                                                _c(\"i\", {\n                                                  staticClass: \"fas fa-bars\",\n                                                }),\n                                              ]\n                                            ),\n                                          ]\n                                        ),\n                                        _vm._v(\" \"),\n                                        _c(\n                                          \"div\",\n                                          { staticClass: \"form-control\" },\n                                          [\n                                            _vm._v(\n                                              \"\\n                                        \" +\n                                                _vm._s(prizeInfo.title) +\n                                                \" (\" +\n                                                _vm._s(prizeInfo.amount) +\n                                                \")\\n                                    \"\n                                            ),\n                                          ]\n                                        ),\n                                        _vm._v(\" \"),\n                                        _c(\n                                          \"div\",\n                                          { staticClass: \"input-group-append\" },\n                                          [\n                                            _c(\n                                              \"span\",\n                                              {\n                                                staticClass: \"input-group-text\",\n                                                staticStyle: {\n                                                  cursor: \"pointer\",\n                                                },\n                                                on: {\n                                                  click: function ($event) {\n                                                    return _vm.openEditPrize(\n                                                      prizeInfo\n                                                    )\n                                                  },\n                                                },\n                                              },\n                                              [\n                                                _c(\"i\", {\n                                                  staticClass: \"far fa-edit\",\n                                                }),\n                                              ]\n                                            ),\n                                          ]\n                                        ),\n                                        _vm._v(\" \"),\n                                        _c(\n                                          \"div\",\n                                          { staticClass: \"input-group-append\" },\n                                          [\n                                            _c(\n                                              \"span\",\n                                              {\n                                                staticClass: \"input-group-text\",\n                                                staticStyle: {\n                                                  cursor: \"pointer\",\n                                                },\n                                                on: {\n                                                  click: function ($event) {\n                                                    return _vm.delPrizeAct(\n                                                      prizeInfo\n                                                    )\n                                                  },\n                                                },\n                                              },\n                                              [\n                                                _c(\"i\", {\n                                                  staticClass:\n                                                    \"fas fa-trash-alt\",\n                                                }),\n                                              ]\n                                            ),\n                                          ]\n                                        ),\n                                      ]\n                                    ),\n                              ]\n                            : _vm._e(),\n                        ]\n                      }),\n                    ],\n                    2\n                  ),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _vm.prizeList.length > 0 ? [_c(\"hr\")] : _vm._e(),\n              _vm._v(\" \"),\n              !_vm.addNewFlag\n                ? [\n                    _c(\n                      \"button\",\n                      {\n                        staticClass: \"btn btn-info btn-block\",\n                        attrs: { id: \"AddPrize\", type: \"button\" },\n                        on: {\n                          click: function ($event) {\n                            return _vm.openAddPrize(true)\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                        新增獎項\\n                    \"\n                        ),\n                      ]\n                    ),\n                  ]\n                : [\n                    _c(\n                      \"div\",\n                      {\n                        staticClass: \"input-group mb-3\",\n                        attrs: { id: \"AddPrizeGroup\" },\n                      },\n                      [\n                        _c(\"input\", {\n                          directives: [\n                            {\n                              name: \"model\",\n                              rawName: \"v-model\",\n                              value: _vm.newPrize.title,\n                              expression: \"newPrize.title\",\n                            },\n                          ],\n                          staticClass: \"form-control\",\n                          attrs: {\n                            name: \"title\",\n                            type: \"text\",\n                            placeholder: \"新增的獎項名稱\",\n                          },\n                          domProps: { value: _vm.newPrize.title },\n                          on: {\n                            input: function ($event) {\n                              if ($event.target.composing) return\n                              _vm.$set(\n                                _vm.newPrize,\n                                \"title\",\n                                $event.target.value\n                              )\n                            },\n                          },\n                        }),\n                        _vm._v(\" \"),\n                        _c(\"input\", {\n                          directives: [\n                            {\n                              name: \"model\",\n                              rawName: \"v-model.number\",\n                              value: _vm.newPrize.amount,\n                              expression: \"newPrize.amount\",\n                              modifiers: { number: true },\n                            },\n                          ],\n                          staticClass: \"form-control\",\n                          attrs: {\n                            name: \"amount\",\n                            type: \"number\",\n                            placeholder: \"數量\",\n                            min: \"1\",\n                            step: \"1\",\n                          },\n                          domProps: { value: _vm.newPrize.amount },\n                          on: {\n                            input: function ($event) {\n                              if ($event.target.composing) return\n                              _vm.$set(\n                                _vm.newPrize,\n                                \"amount\",\n                                _vm._n($event.target.value)\n                              )\n                            },\n                            blur: function ($event) {\n                              return _vm.$forceUpdate()\n                            },\n                          },\n                        }),\n                        _vm._v(\" \"),\n                        _c(\"div\", { staticClass: \"input-group-append\" }, [\n                          _c(\n                            \"span\",\n                            {\n                              staticClass: \"input-group-text\",\n                              staticStyle: { cursor: \"pointer\" },\n                              on: { click: _vm.saveNewPrizeAct },\n                            },\n                            [_c(\"i\", { staticClass: \"far fa-save\" })]\n                          ),\n                        ]),\n                      ]\n                    ),\n                  ],\n            ],\n            2\n          ),\n        ]),\n      ]),\n    ]\n  )\n}\nvar staticRenderFns = [\n  function () {\n    var _vm = this,\n      _c = _vm._self._c\n    return _c(\n      \"button\",\n      {\n        staticClass: \"close\",\n        attrs: {\n          type: \"button\",\n          \"data-dismiss\": \"modal\",\n          \"aria-label\": \"Close\",\n        },\n      },\n      [_c(\"span\", { attrs: { \"aria-hidden\": \"true\" } }, [_vm._v(\"×\")])]\n    )\n  },\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"PrizeListBox\" ref=\"box\" class=\"modal\" tabindex=\"-1\"\n        role=\"dialog\"\n    >\n        <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">\n                        <i class=\"fas fa-award\"></i>\n                        獎項名單 [{{ inputPrizeListCnt.cnt }} / {{ inputPrizeListCnt.amount }}]\n                    </h5>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\"\n                        aria-label=\"Close\"\n                    >\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                    <draggable\n                        v-model=\"inputPrizeList\"\n                        handle=\".handler\"\n                        @change=\"sortCallback\"\n                    >\n                        <transition-group>\n                            <template v-for=\"prizeInfo in inputPrizeList\">\n                                <template v-if=\"prizeInfo.del === false\">\n                                    <div v-if=\"!!editPrizeInfo && editPrizeInfo.prize_sn === prizeInfo.prize_sn\" :key=\"prizeInfo.prize_sn\" class=\"input-group mb-3\">\n                                        <div class=\"input-group-prepend handler cursor-pointer\">\n                                            <span class=\"input-group-text\" id=\"basic-addon1\">\n                                                <i class=\"fas fa-bars\"></i>\n                                            </span>\n                                        </div>\n                                        <input v-model=\"editPrizeInfo.title\" type=\"text\"\n                                            class=\"form-control\" placeholder=\"編輯獎項名稱\"\n                                        >\n                                        <input v-model.number=\"editPrizeInfo.amount\" type=\"number\"\n                                            class=\"form-control\" placeholder=\"數量\"\n                                            min=\"1\"\n                                            step=\"1\"\n                                        >\n                                        <div class=\"input-group-append\">\n                                            <span class=\"input-group-text btn-success\" style=\"cursor: pointer\" @click=\"saveEditPrizeAct\">\n                                                <i class=\"far fa-save\"></i>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <div v-else :key=\"prizeInfo.prize_sn\" class=\"input-group mb-3 prizeListGroup\">\n                                        <div class=\"input-group-prepend handler cursor-pointer\">\n                                            <span class=\"input-group-text\" id=\"basic-addon1\">\n                                                <i class=\"fas fa-bars\"></i>\n                                            </span>\n                                        </div>\n                                        <div class=\"form-control\">\n                                            {{ prizeInfo.title }} ({{ prizeInfo.amount }})\n                                        </div>\n                                        <div class=\"input-group-append\">\n                                            <span class=\"input-group-text\" style=\"cursor: pointer\" @click=\"openEditPrize(prizeInfo)\">\n                                                <i class=\"far fa-edit\"></i>\n                                            </span>\n                                        </div>\n                                        <div class=\"input-group-append\">\n                                            <span class=\"input-group-text\" style=\"cursor: pointer\" @click=\"delPrizeAct(prizeInfo)\">\n                                                <i class=\"fas fa-trash-alt\"></i>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </template>\n                            </template>\n                        </transition-group>\n                    </draggable>\n\n                    <template v-if=\"prizeList.length > 0\">\n                        <hr />\n                    </template>\n\n                    <template v-if=\"!addNewFlag\">\n                        <button id=\"AddPrize\" type=\"button\" class=\"btn btn-info btn-block\" @click=\"openAddPrize(true)\">\n                            新增獎項\n                        </button>\n                    </template>\n                    <template v-else>\n                        <div id=\"AddPrizeGroup\" class=\"input-group mb-3\">\n                            <input v-model=\"newPrize.title\"\n                                name=\"title\"\n                                type=\"text\"\n                                class=\"form-control\"\n                                placeholder=\"新增的獎項名稱\"\n                            >\n                            <input v-model.number=\"newPrize.amount\"\n                                name=\"amount\"\n                                type=\"number\"\n                                class=\"form-control\" placeholder=\"數量\"\n                                min=\"1\"\n                                step=\"1\"\n                            >\n                            <div class=\"input-group-append\">\n                                <span class=\"input-group-text\" style=\"cursor: pointer\" @click=\"saveNewPrizeAct\">\n                                    <i class=\"far fa-save\"></i>\n                                </span>\n                            </div>\n                        </div>\n                    </template>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\nimport draggable from 'vuedraggable'\n\nimport { popup, string, trackJS } from 'lib/common/util';\nimport { mapActions, mapMutations, mapGetters } from 'vuex';\n\nexport default {\n    components: {\n        draggable,\n    },\n    filters: {},\n    props: {},\n    data(){\n        return {\n            addNewFlag: false,\n            newPrize: {\n                title: '',\n                amount: 1,\n            },\n            inputPrizeList: [],\n            editPrizeInfo: null,\n        };\n    },\n    computed: {\n        ...mapGetters([\n            'triggerOpenPrizeList',\n            'prizeList',\n        ]),\n        inputPrizeListCnt(){\n            let PrizeCnt = 0;\n            let PrizeAmountCnt = 0;\n            this.inputPrizeList.forEach((info) => {\n                if (info.del === false) {\n                    PrizeCnt += 1;\n                    PrizeAmountCnt += info.amount;\n                }\n            });\n            return { cnt: PrizeCnt, amount: PrizeAmountCnt };\n        },\n    },\n    watch: {\n        triggerOpenPrizeList: {\n            handler(){\n                if (this.triggerOpenPrizeList) {\n                    $(this.$refs.box).modal('show');\n                } else {\n                    $(this.$refs.box).modal('hide');\n                }\n            },\n        },\n        inputPrizeList: {\n            deep: true,\n            handler(){\n                const that = this;\n                const prizeList = JSON.stringify(that.prizeList);\n                const inputPrizeList = JSON.stringify(that.inputPrizeList);\n                if (prizeList !== inputPrizeList) {\n                    that.syncPrizeList(JSON.parse(inputPrizeList));\n                }\n            },\n        },\n    },\n    created(){},\n    mounted(){\n        const that = this;\n\n        $(this.$refs.box).bind('shown.bs.modal', () => {\n            that.inputPrizeList = JSON.parse(JSON.stringify(that.prizeList));\n            that.addNewFlag = false;\n            that.newPrize = {\n                title: '',\n                amount: 1,\n            };\n\n            if (that.inputPrizeList.length === 0) {\n                that.addNewFlag = true;\n            }\n            that.editPrizeInfo = null;\n\n            trackJS.mixpanel('PrizeListOpen_click');\n            trackJS.gtag('event', 'PrizeListOpen_click');\n        });\n\n        $(that.$refs.box).bind('hidden.bs.modal', () => {\n            trackJS.mixpanel('PrizeListClose_click');\n            trackJS.gtag('event', 'PrizeListClose_click');\n        });\n\n        if (this.triggerOpenPrizeList) {\n            $(this.$refs.box).modal('show');\n        } else {\n            $(this.$refs.box).modal('hide');\n        }\n    },\n    updated(){},\n    destroyed(){},\n    methods: {\n        ...mapActions({}),\n        ...mapMutations({\n            syncPrizeList: 'syncPrizeList',\n        }),\n        openAddPrize(){\n            const that = this;\n            that.newPrize = {\n                title: '',\n                amount: 1,\n            };\n            that.addNewFlag = true;\n        },\n        saveNewPrizeAct(){\n            const that = this;\n            if (!!that.newPrize.title) {\n                const inputPrizeList = JSON.parse(JSON.stringify(that.inputPrizeList));\n                const prizeListTitle = inputPrizeList.map(item => item.title);\n\n                if (!prizeListTitle.includes(that.newPrize.title)) {\n                    const params = {\n                        prize_sn: string.getRandomString(10),\n                        title: '獎勵',\n                        amount: 1,\n                        del: false,\n                        ...that.newPrize,\n                    };\n                    that.inputPrizeList.push(params);\n                    that.addNewFlag = false;\n\n                    trackJS.mixpanel('PrizeListAdd_click', params);\n                    trackJS.gtag('event', 'PrizeListAdd_click', params);\n                } else {\n                    popup.warning({\n                        html: '已有相同的獎項',\n                    });\n                }\n            } else {\n                that.addNewFlag = false;\n            }\n        },\n        openEditPrize(prizeInfo){\n            const that = this;\n            that.editPrizeInfo = JSON.parse(JSON.stringify(prizeInfo));\n        },\n        saveEditPrizeAct(){\n            const that = this;\n            if (that.editPrizeInfo) {\n                const editPrizeInfo = JSON.parse(JSON.stringify(that.editPrizeInfo));\n                const inputPrizeList = JSON.parse(JSON.stringify(that.inputPrizeList));\n\n                let match = false;\n                inputPrizeList.forEach((item) => {\n                    if (item.prize_sn !== editPrizeInfo.prize_sn && item.title === editPrizeInfo.title) {\n                        match = true;\n                    }\n                });\n\n                if (!match) {\n                    let focus_index = false;\n                    inputPrizeList.forEach((item, index) => {\n                        if (item.prize_sn === editPrizeInfo.prize_sn) {\n                            focus_index = index;\n                        }\n                    });\n\n                    if (focus_index === false) {\n                        inputPrizeList.del = false;\n                        inputPrizeList.push(editPrizeInfo);\n                    } else {\n                        inputPrizeList[focus_index] = editPrizeInfo;\n                    }\n\n                    that.inputPrizeList = inputPrizeList;\n                    trackJS.mixpanel('PrizeListEditSave_click', editPrizeInfo);\n                    trackJS.gtag('event', 'PrizeListEditSave_click', editPrizeInfo);\n                    that.editPrizeInfo = null;\n                } else {\n                    popup.warning({\n                        html: '已有相同的獎項',\n                    });\n                }\n            }\n        },\n        delPrizeAct(prizeInfo){\n            const that = this;\n            popup.warning({\n                html: '您確定要刪除此筆獎項嗎？對應的得獎資訊也都會消除唷',\n            }, () => {\n                const inputPrizeList = JSON.parse(JSON.stringify(that.inputPrizeList));\n                let focus_index = false;\n                inputPrizeList.forEach((item, index) => {\n                    if (item.prize_sn === prizeInfo.prize_sn) {\n                        focus_index = index;\n                    }\n                });\n                if (focus_index !== false) {\n                    inputPrizeList[focus_index].del = true;\n                    trackJS.mixpanel('PrizeListEditDel_click', inputPrizeList[focus_index]);\n                    trackJS.gtag('event', 'PrizeListEditDel_click', inputPrizeList[focus_index]);\n                }\n                that.inputPrizeList = inputPrizeList;\n            });\n        },\n        sortCallback(){\n            const that = this;\n            const inputPrizeList = JSON.parse(JSON.stringify(that.inputPrizeList));\n            trackJS.mixpanel('PrizeListSort_trigger', inputPrizeList);\n            trackJS.gtag('event', 'PrizeListSort_trigger', inputPrizeList);\n        },\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n</style>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=4e95f7e6&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e95f7e6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","id","tabindex","role","_v","_s","inputPrizeListCnt","cnt","amount","_m","handle","on","change","sortCallback","model","value","inputPrizeList","callback","$$v","expression","_l","prizeInfo","del","editPrizeInfo","prize_sn","key","directives","name","rawName","title","type","placeholder","domProps","input","$event","target","composing","$set","modifiers","number","min","step","_n","blur","$forceUpdate","staticStyle","cursor","click","saveEditPrizeAct","openEditPrize","delPrizeAct","_e","prizeList","length","addNewFlag","newPrize","saveNewPrizeAct","openAddPrize","_withStripped","components","draggable","filters","props","data","computed","mapGetters","PrizeCnt","PrizeAmountCnt","forEach","info","watch","triggerOpenPrizeList","handler","$","$refs","box","modal","deep","that","JSON","stringify","syncPrizeList","parse","created","mounted","bind","trackJS","mixpanel","gtag","updated","destroyed","methods","mapActions","mapMutations","map","item","includes","popup","warning","html","params","string","getRandomString","push","match","focus_index","index"],"sourceRoot":""}