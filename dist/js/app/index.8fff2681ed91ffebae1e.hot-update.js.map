{"version":3,"sources":["webpack:///./lib/store/mutations/common.js"],"names":["initSystem","state","params","defaultConfig","JSON","parse","stringify","config","localStorage","getItem","luckySN","shortlist","shortlistInput","shortlist_sort","Array","isArray","saveToLocalStorage","setItem","setConfig","clearAllData","triggerOpenEditListModal","triggerOpenEditList","Date","getTime","triggerOpenLuckyModal","triggerOpenLucky","triggerOpenResultModal","triggerOpenResult","triggerOpenSettingModal","triggerOpenSetting","editShortList","data","sn","lucky","includes","push","index","indexOf","splice","award","split","setShortListInput","shortlistInputObj","shortlistInputArr","map","string","trim","Obj","name","pos","filter","matchName","del","forEach","length","key","value","join","setShortlistRandomSort","shortlistSN","loopTime","shortlistSN_new","i","parseInt","Math","random","setFocusSN","focusSN","setFocusSN2LuckySN","filterResult"],"mappings":"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","file":"app/index.8fff2681ed91ffebae1e.hot-update.js","sourcesContent":["export default {\n    initSystem(state, params) {\n        let defaultConfig = JSON.parse( JSON.stringify( state.defaultConfig) );\n\n        let config = JSON.parse(localStorage.getItem('config'));\n        let luckySN = JSON.parse(localStorage.getItem('luckySN'));\n        let shortlist = JSON.parse(localStorage.getItem('shortlist'));\n        let shortlistInput = JSON.parse(localStorage.getItem('shortlistInput'));\n        let shortlist_sort = JSON.parse(localStorage.getItem('shortlist_sort'));\n\n\n        if ( typeof config != \"object\") {\n            config = {};\n        }\n\n        if (!Array.isArray(luckySN)) {\n            luckySN = [];\n        }\n\n        if (!Array.isArray(shortlist)) {\n            shortlist = [];\n        }\n\n        if (!Array.isArray(shortlist_sort)) {\n            shortlist_sort = [];\n        }\n\n\n        if ( typeof shortlistInput != \"string\") {\n            shortlistInput = \"\";\n        }\n\n\n        state.config = {...defaultConfig, ...config};\n        state.luckySN = luckySN;\n        state.shortlist = shortlist;\n        state.shortlistInput = shortlistInput;\n        state.shortlist_sort = shortlist_sort;\n    },\n    saveToLocalStorage(state, params) {\n        let config = JSON.stringify( state.config) ;\n        let luckySN = JSON.stringify( state.luckySN);\n        let shortlist = JSON.stringify( state.shortlist);\n        let shortlistInput = JSON.stringify( state.shortlistInput);\n        let shortlist_sort = JSON.stringify( state.shortlist_sort);\n\n\n        localStorage.setItem('config', config);\n        localStorage.setItem('luckySN', luckySN);\n        localStorage.setItem('shortlist', shortlist);\n        localStorage.setItem('shortlistInput', shortlistInput);\n        localStorage.setItem('shortlist_sort', shortlist_sort);\n    },\n\n    setConfig(state, params) {\n        let config = JSON.parse( JSON.stringify( state.config) );\n        config = {...config, ...params.config};\n        state.config = config;\n    },\n\n    clearAllData(state, params) {\n\n    },\n\n    triggerOpenEditListModal(state, params) {\n        state.triggerOpenEditList = new Date().getTime();\n    },\n\n    triggerOpenLuckyModal(state, params) {\n        state.triggerOpenLucky = new Date().getTime();\n    },\n\n    triggerOpenResultModal(state,params) {\n        state.triggerOpenResult = new Date().getTime();\n    },\n\n    triggerOpenSettingModal(state,params) {\n        state.triggerOpenSetting = new Date().getTime();\n    },\n\n    editShortList(state, params) {\n        let data = params.data;\n        let shortlist = JSON.parse(JSON.stringify(state.shortlist));\n        let luckySN = JSON.parse(JSON.stringify(state.luckySN));\n\n        let sn = data.sn;\n        if (data.lucky == \"1\") {\n            if (!luckySN.includes(sn)) {\n                luckySN.push(sn);\n            }\n        } else {\n            let index = luckySN.indexOf(sn);\n            if (index >= 0) {\n                luckySN.splice(index, 1);\n            }\n        }\n\n        shortlist[sn].award = data.award.split(\",\");\n\n        state.shortlist = shortlist;\n        state.luckySN = luckySN;\n    },\n\n    setShortListInput(state, params) {\n        let shortlistInput = params.shortlistInput;\n        let shortlist = JSON.parse(JSON.stringify(state.shortlist));\n        let shortlist_sort = JSON.parse(JSON.stringify(state.shortlist_sort));\n\n\n        let shortlistInputObj = {};\n        let shortlistInputArr = shortlistInput.split(\"\\n\").map(function(data) {\n            data = data.split(\"|\").map(function(string) {\n                return string.trim();\n            });\n            let Obj = {\n                name: data[0],\n                pos: data[1] || \"\",\n            };\n            return Obj;\n        }).filter(function(data) {\n            if (!!data.name) {\n                shortlistInputObj[data.name] = data;\n                return !!data.name;\n            } else {\n                return false;\n            }\n        });\n\n\n        let matchName = [];\n        shortlist = shortlist.map(function(data) {\n            data.del = !!!shortlistInputObj[data.name];\n            if (!data.del) {\n                matchName.push(data.name);\n                data.pos = shortlistInputObj[data.name].pos;\n                if (!shortlist_sort.includes(data.sn)) {\n                    shortlist_sort.push(data.sn);\n                }\n            } else {\n                shortlist_sort = shortlist_sort.filter(function(sn) {\n                    return sn != data.sn;\n                });\n            }\n            return data;\n        });\n\n        shortlistInputArr.forEach(function(data) {\n            if (!matchName.includes(data.name)) {\n                let sn = shortlist.length;\n                shortlist.push({\n                    sn: sn,\n                    name: data.name,\n                    pos: data.pos,\n                    award: [],\n                    del: false,\n                });\n                shortlist_sort.push(sn);\n            }\n        });\n\n        state.shortlistInput = shortlistInputArr.map(function(data) {\n            return [\"name\", \"pos\"].map(function(key) {\n                return data[key]\n            }).filter(function(value) { return !!value }).join(\"|\");\n        }).join(\"\\n\");\n        state.shortlist = shortlist;\n        state.shortlist_sort = shortlist_sort;\n    },\n\n    setShortlistRandomSort(state, params) {\n        let shortlist = JSON.parse(JSON.stringify(state.shortlist));\n        let shortlist_sort = JSON.parse(JSON.stringify(state.shortlist_sort));\n\n        let shortlistSN = shortlist.filter(function(data) {\n            return !data.del;\n        }).map(function(data) {\n            return data.sn;\n        });\n\n        let loopTime = shortlistSN.length;\n        let shortlistSN_new = [];\n        for (let i = 0; i < loopTime; i++) {\n            let length = shortlistSN.length;\n            let index = parseInt(Math.random() * 100 % length);\n            shortlistSN_new.push(shortlistSN[index]);\n            shortlistSN.splice(index, 1);\n        }\n        state.shortlist_sort = shortlistSN_new;\n    },\n\n    setFocusSN(state, params) {\n        state.focusSN = params;\n    },\n\n    setFocusSN2LuckySN(state, params) {\n        let shortlist = JSON.parse(JSON.stringify(state.shortlist));\n        let luckySN = JSON.parse(JSON.stringify(state.luckySN));\n        let focusSN = JSON.parse(JSON.stringify(state.focusSN));\n\n        let filterResult = shortlist.filter(function(data) {\n            if (data.sn == focusSN) {\n                data.award.push(params.award);\n                return true;\n            } else {\n                return false;\n            }\n        });\n\n        if (filterResult.length > 0 && !luckySN.includes(focusSN)) {\n            luckySN.push(focusSN);\n        }\n\n        state.focusSN = null;\n        state.luckySN = luckySN;\n        state.shortlist = shortlist;\n\n    }\n}"],"sourceRoot":""}